=== ./frontend/dist/assets/DepartmentsView-BlwdTMH_.js ===
import{H as z,r as u,I as C,d as I,m as E,z as L,c as A,b as c,e as s,w as n,f as m,E as S,g as v,J as j,K as G,F as H,G as J,p as x,t as D,o as g,L as K,_ as O}from"./index-BcrAjMzN.js";const P=z("department",()=>{const b=u([]),l=u([]),d=u([]),p=u(!1),f=async()=>{p.value=!0;try{const e=await C.get("/departments");b.value=e.data,d.value=e.data}catch(e){throw console.error("èŽ·å–éƒ¨é—¨åˆ—è¡¨å¤±è´¥:",e),e}finally{p.value=!1}};return{departments:b,departmentStats:l,allDepartments:d,loading:p,fetchDepartments:f,fetchDepartmentStats:async()=>{try{const e=await C.get("/departments/stats");console.log("ðŸ” éƒ¨é—¨ç»Ÿè®¡APIå®Œæ•´å“åº”:",e.data),e.data&&e.data.length>0&&(e.data.forEach((i,y)=>{console.log(`éƒ¨é—¨ ${y+1}:`,i)}),console.log("ðŸ“Š éƒ¨é—¨ç»Ÿè®¡å­—æ®µç»“æž„:",Object.keys(e.data[0]))),l.value=e.data}catch(e){throw console.error("èŽ·å–éƒ¨é—¨ç»Ÿè®¡å¤±è´¥:",e),e}},fetchAllDepartments:async()=>f(),fetchDepartmentDetail:async e=>{try{return(await C.get(`/departments/${e}`)).data}catch(i){throw console.error("èŽ·å–éƒ¨é—¨è¯¦æƒ…å¤±è´¥:",i),i}}}}),T={class:"departments"},q={class:"header"},Q={class:"stat-content"},R={class:"dept-info"},U={class:"dept-name"},W={class:"member-count"},X=I({__name:"DepartmentsView",setup(b){const l=P(),d=u(!1),p={1:"#409EFF",2:"#67C23A",3:"#E6A23C",4:"#F56C6C",5:"#909399",6:"#FF85C0",7:"#722ED1"},f=E(()=>(l.departmentStats||[]).map(a=>({...a,member_count:a.member_count||0}))),w=E(()=>l.allDepartments||[]),k=a=>p[a]||"#409EFF",F=a=>{const t=l.departmentStats.find(o=>o.department_id===a);return t&&t.member_count||0},e=async()=>{var a,t;d.value=!0;try{await l.fetchDepartmentStats(),await l.fetchAllDepartments(),S.success("æ•°æ®åŠ è½½æˆåŠŸ")}catch(o){console.error("åŠ è½½éƒ¨é—¨æ•°æ®å¤±è´¥:",o),S.error("åŠ è½½éƒ¨é—¨æ•°æ®å¤±è´¥: "+(((t=(a=o.response)==null?void 0:a.data)==null?void 0:t.message)||o.message))}finally{d.value=!1}},i=()=>{e()},y=a=>{const t=w.value.find(h=>h.id===a),o=(t==null?void 0:t.name)||`éƒ¨é—¨ ${a}`;S.info(`æŸ¥çœ‹ ${o} çš„æˆå‘˜åˆ—è¡¨`)};return L(()=>{e()}),(a,t)=>{const o=m("el-button"),h=m("el-card"),V=m("el-col"),$=m("el-row"),_=m("el-table-column"),B=m("el-tag"),M=m("el-table"),N=J("loading");return g(),A("div",T,[c("div",q,[t[1]||(t[1]=c("h1",null,"éƒ¨é—¨ç®¡ç†",-1)),s(o,{type:"primary",onClick:i,loading:d.value},{default:n(()=>[...t[0]||(t[0]=[v(" åˆ·æ–°æ•°æ® ",-1)])]),_:1},8,["loading"])]),s($,{gutter:20,class:"stats-row"},{default:n(()=>[(g(!0),A(j,null,G(f.value,r=>(g(),x(V,{key:r.department_id,span:6},{default:n(()=>[s(h,{class:"stat-card"},{default:n(()=>[c("div",Q,[c("div",{class:"dept-icon",style:K({backgroundColor:k(r.department_id)})},[...t[2]||(t[2]=[c("i",{class:"el-icon-office-building"},null,-1)])],4),c("div",R,[c("div",U,D(r.department_name),1),c("div",W,D(r.member_count)+" åæˆå‘˜",1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(h,{class:"details-card",header:"éƒ¨é—¨æˆå‘˜è¯¦æƒ…"},{default:n(()=>[H((g(),x(M,{data:w.value,style:{width:"100%"}},{default:n(()=>[s(_,{prop:"id",label:"ID",width:"80"}),s(_,{prop:"name",label:"éƒ¨é—¨åç§°",width:"150"}),s(_,{label:"æˆå‘˜æ•°é‡",width:"120"},{default:n(({row:r})=>[s(B,null,{default:n(()=>[v(D(F(r.id)),1)]),_:2},1024)]),_:1}),s(_,{prop:"description",label:"éƒ¨é—¨æè¿°"},{default:n(({row:r})=>[v(D(r.description||"æš‚æ— æè¿°"),1)]),_:1}),s(_,{label:"æ“ä½œ",width:"120"},{default:n(({row:r})=>[s(o,{size:"small",onClick:Y=>y(r.id)},{default:n(()=>[...t[3]||(t[3]=[v(" æŸ¥çœ‹ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,d.value]])]),_:1})])}}}),ee=O(X,[["__scopeId","data-v-771a9c92"]]);export{ee as default};



